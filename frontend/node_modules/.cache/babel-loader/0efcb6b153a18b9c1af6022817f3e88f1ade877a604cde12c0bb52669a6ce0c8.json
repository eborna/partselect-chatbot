{"ast":null,"code":"import _regeneratorRuntime from\"/Users/eugeniabornacini/Documents/code/interviews/instalily-case-study/frontend/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _toConsumableArray from\"/Users/eugeniabornacini/Documents/code/interviews/instalily-case-study/frontend/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import _asyncToGenerator from\"/Users/eugeniabornacini/Documents/code/interviews/instalily-case-study/frontend/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"/Users/eugeniabornacini/Documents/code/interviews/instalily-case-study/frontend/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState,useEffect,useRef}from\"react\";import\"./ChatWindow.css\";import{getAIMessage}from\"../api/api\";import{marked}from\"marked\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";function ChatWindow(){var defaultMessage=[{role:\"assistant\",content:\"Hi, how can I help you today?\"}];var _useState=useState(defaultMessage),_useState2=_slicedToArray(_useState,2),messages=_useState2[0],setMessages=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),input=_useState4[0],setInput=_useState4[1];var messagesEndRef=useRef(null);var scrollToBottom=function scrollToBottom(){var _messagesEndRef$curre;(_messagesEndRef$curre=messagesEndRef.current)===null||_messagesEndRef$curre===void 0?void 0:_messagesEndRef$curre.scrollIntoView({behavior:\"smooth\"});};useEffect(function(){scrollToBottom();},[messages]);var handleSend=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var userInput,newMessage;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(!(input.trim()!==\"\")){_context.next=8;break;}setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[{role:\"user\",content:input}]);});userInput=input;setInput(\"\");_context.next=6;return getAIMessage(userInput);case 6:newMessage=_context.sent;setMessages(function(prevMessages){return[].concat(_toConsumableArray(prevMessages),[newMessage]);});case 8:case\"end\":return _context.stop();}},_callee);}));return function handleSend(){return _ref.apply(this,arguments);};}();return/*#__PURE__*/_jsxs(\"div\",{className:\"messages-container\",children:[messages.map(function(message,index){return/*#__PURE__*/_jsx(\"div\",{className:\"\".concat(message.role,\"-message-container\"),children:message.content&&/*#__PURE__*/_jsx(\"div\",{className:\"message \".concat(message.role,\"-message\"),children:/*#__PURE__*/_jsx(\"div\",{dangerouslySetInnerHTML:{__html:marked(message.content).replace(/<p>|<\\/p>/g,\"\")}})})},index);}),/*#__PURE__*/_jsx(\"div\",{ref:messagesEndRef}),/*#__PURE__*/_jsxs(\"div\",{className:\"input-area\",children:[/*#__PURE__*/_jsx(\"input\",{value:input,onChange:function onChange(e){return setInput(e.target.value);},placeholder:\"Type a message...\",onKeyPress:function onKeyPress(e){if(e.key===\"Enter\"&&!e.shiftKey){e.preventDefault();handleSend();}}}),/*#__PURE__*/_jsx(\"button\",{className:\"send-button\",onClick:handleSend,children:\"Send\"})]})]});}export default ChatWindow;","map":{"version":3,"names":["React","useState","useEffect","useRef","getAIMessage","marked","jsx","_jsx","jsxs","_jsxs","ChatWindow","defaultMessage","role","content","_useState","_useState2","_slicedToArray","messages","setMessages","_useState3","_useState4","input","setInput","messagesEndRef","scrollToBottom","_messagesEndRef$curre","current","scrollIntoView","behavior","handleSend","_ref","_asyncToGenerator","_regeneratorRuntime","mark","_callee","userInput","newMessage","wrap","_callee$","_context","prev","next","trim","prevMessages","concat","_toConsumableArray","sent","stop","apply","arguments","className","children","map","message","index","dangerouslySetInnerHTML","__html","replace","ref","value","onChange","e","target","placeholder","onKeyPress","key","shiftKey","preventDefault","onClick"],"sources":["/Users/eugeniabornacini/Documents/code/interviews/instalily-case-study/frontend/src/components/ChatWindow.js"],"sourcesContent":["import React, { useState, useEffect, useRef } from \"react\";\nimport \"./ChatWindow.css\";\nimport { getAIMessage } from \"../api/api\";\nimport { marked } from \"marked\";\n\nfunction ChatWindow() {\n  const defaultMessage = [{\n    role: \"assistant\",\n    content: \"Hi, how can I help you today?\"\n  }];\n  const [messages, setMessages] = useState(defaultMessage);\n  const [input, setInput] = useState(\"\");\n  const messagesEndRef = useRef(null);\n\n  const scrollToBottom = () => {\n    messagesEndRef.current?.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  useEffect(() => {\n    scrollToBottom();\n  }, [messages]);\n\n  const handleSend = async () => {\n    if (input.trim() !== \"\") {\n      setMessages(prevMessages => [...prevMessages, { role: \"user\", content: input }]);\n      const userInput = input;\n      setInput(\"\");\n      const newMessage = await getAIMessage(userInput);\n      setMessages(prevMessages => [...prevMessages, newMessage]);\n    }\n  };\n\n  return (\n    <div className=\"messages-container\">\n      {messages.map((message, index) => (\n        <div key={index} className={`${message.role}-message-container`}>\n          {message.content && (\n            <div className={`message ${message.role}-message`}>\n              <div dangerouslySetInnerHTML={{__html: marked(message.content).replace(/<p>|<\\/p>/g, \"\")}}></div>\n            </div>\n          )}\n        </div>\n      ))}\n      <div ref={messagesEndRef} />\n      <div className=\"input-area\">\n        <input\n          value={input}\n          onChange={(e) => setInput(e.target.value)}\n          placeholder=\"Type a message...\"\n          onKeyPress={(e) => {\n            if (e.key === \"Enter\" && !e.shiftKey) {\n              e.preventDefault();\n              handleSend();\n            }\n          }}\n        />\n        <button className=\"send-button\" onClick={handleSend}>\n          Send\n        </button>\n      </div>\n    </div>\n  );\n}\n\nexport default ChatWindow;"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}